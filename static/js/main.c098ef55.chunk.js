(this["webpackJsonpblindtest-spotify"]=this["webpackJsonpblindtest-spotify"]||[]).push([[0],{19:function(t,e,n){t.exports=n.p+"static/media/logo.79f6b6a0.svg"},20:function(t,e,n){t.exports=n.p+"static/media/loading.9d4cbf40.svg"},23:function(t,e,n){t.exports=n(52)},28:function(t,e,n){},29:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(15),i=n.n(r),c=(n(28),n(16)),s=n(17),u=n(21),l=n(18),f=n(22),m=n(19),d=n.n(m),h=n(20),p=n.n(h),k=(n(29),n(6)),v=n.n(k),g=(n(51),function(t){return o.a.createElement("button",{onClick:t.onClick},t.children)});function w(t){var e=t.track.track.album.images[1];return o.a.createElement("img",{src:e.url})}function b(t){for(var e=t.length;e>0;){var n=N(e),a=t[--e];t[e]=t[n],t[n]=a}return t}function N(t){return Math.floor(Math.random()*t)}var T=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(u.a)(this,Object(l.a)(e).call(this))).setGameTimeout=function(){console.log("Set new timeout"),t.timeout=setTimeout(t.startNewGame,1e4)},t.startNewGame=function(){for(var e=t.state.tracks.length,n=N(e),a=N(e);a===n;)a=N(e);for(var o=N(e);o===n||o===a;)o=N(e);t.setState((function(){return{currentTrack:t.state.tracks[n],shuffledTracks:b([t.state.tracks[n],t.state.tracks[a],t.state.tracks[o]]),songsLoaded:!0}})),clearTimeout(t.timeout),t.setGameTimeout()},t.onClick=function(e){if(e===t.state.currentTrack.track.id)return swal("T'es trop forte","success").then((function(){clearTimeout(t.timeout),t.startNewGame()}));swal("Loser")},t.timeout=null,t.state={tracks:[],currentTrack:{},shuffledTracks:[],songsLoaded:!1},t}return Object(f.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("\thttps://api.spotify.com/v1/playlists/1wCB2uVwBCIbJA9rar5B77/tracks",{method:"GET",headers:{Authorization:"Bearer BQD20V3kslqP0wTuMC8oDvyD7vHFMJZAHuS45KXkrddLVQXryg17LsScw6exAON0FZyhS5hNUltmRZ0m9p_U3TuMOAMqoj7bOW7cFa1f9B1vz4Swj5tp8qNavCp6kjCn_0rX77_yFIiZu4iPUnkTVifsOfNHILvQYQ"}}).then((function(t){return t.json()})).then((function(e){t.setState({tracks:e.items},(function(){t.startNewGame(),t.setGameTimeout()}))}))}},{key:"render",value:function(){var t=this;if(!this.state.songsLoaded)return o.a.createElement("img",{src:p.a,className:"App-loading",alt:"loading"});var e=this.state.shuffledTracks,n=this.state.currentTrack;return o.a.createElement("div",{className:"App"},o.a.createElement(v.a,{url:n.track.preview_url,playStatus:v.a.status.PLAYING}),o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},"Bienvenue sur le Blindtest")),o.a.createElement("div",{className:"App-images"},o.a.createElement(w,{track:n})),o.a.createElement("div",{className:"App-buttons"},e.map((function(e){return o.a.createElement(g,{onClick:function(){return t.onClick(e.track.id)}},e.track.name)}))))}}]),e}(a.Component),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(t){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(t){console.error("Error during service worker registration:",t)}))}i.a.render(o.a.createElement(T,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/blindtest-spotify",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/blindtest-spotify","/service-worker.js");E?function(t){fetch(t).then((function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):y(t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t):y(t)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.c098ef55.chunk.js.map